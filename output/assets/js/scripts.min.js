"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){document.querySelector("#"+e+"+.dropdownList").classList.toggle("show"),document.querySelector("body").addEventListener("click",function(o){document.querySelector("#"+e+"+ .dropdownList")&&(o.target.matches("button")||document.querySelector("#"+e+"+ .dropdownList").classList.remove("show"))})}function o(e,o){document.querySelector("#topicMenu").innerText=e,document.querySelector("#topicMenu + .dropdownList").classList.toggle("show"),document.querySelector(".questionCount").innerHTML=o+" Questions",document.querySelector(".randomStatus").innerText="Random Off",document.querySelector(".randomHolder").classList.remove("hide")}function t(){document.querySelector(".topic").innerText=w[H].name}function n(){document.querySelector(".category").innerText="Category: "+A}function r(e){document.querySelector("#topicRow .lowerBox").innerHTML=w[e].description}function s(){for(var e="",t=0;t<w.length;t++)e+="<a>"+w[t].name+"</a>";document.querySelector("#topicList").innerHTML=e;for(var n=document.querySelectorAll("#topicList.dropdownList a"),t=0;t<n.length;t++)n[t].setAttribute("order",t),n[t].onclick=function(){r(H=this.getAttribute("order"));var e=w[H].questions.length;o(this.innerHTML,e),document.querySelector(".secondMenu.disabled")&&document.querySelector(".secondMenu.disabled").classList.remove("disabled"),c()}}function c(){for(var e="<a order='0'>All</a>",o=1,t=[],n=w[H].questions,r=0;r<n.length;r++)-1==t.indexOf(n[r].category)&&""!==n[r].category&&(t.push(n[r].category),console.log(w[H].questions[r].category),e+="<a>"+w[H].questions[r].category+"</a>",o++);document.querySelector("#categoryList").innerHTML=e;for(var s=document.querySelectorAll("#categoryList.dropdownList a"),r=0;r<s.length;r++)s[r].setAttribute("order",r),s[r].onclick=function(){C=this.getAttribute("order");var e=o;u(this.innerHTML,e)}}function u(e,o){A=e,document.querySelector("#categoryMenu").innerText=e,document.querySelector("#categoryMenu + .dropdownList").classList.toggle("show"),console.log("you clicked "+e);for(var t=w[H].questions,n=0,r=0;r<t.length;r++)t[r].category==A&&n++;document.querySelector(".questionCount").innerHTML="All"==A?t.length+" Questions":n+" Questions"}function i(){N=(new Date).getTime();var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.responseText;if(document.querySelector(".container").innerHTML=e,t(),n(),"All"==A)document.querySelector(".questionHolder").innerHTML=w[H].questions[0].question;else{console.log("chosenCategory",A),console.log(w[H].questions);for(var o=0;o<w[H].questions.length;o++)console.log(w[H].questions[o].category),w[H].questions[o].category==A&&b.push(w[H].questions[o]);console.log(b,"show me what you got, topicDataFilteredCategory."),document.querySelector(".questionHolder").innerHTML=b[0].question}document.querySelector(".close").addEventListener("click",function(){y(R.endQuiz,"yes","no")}),document.querySelector(".hint").addEventListener("click",function(){console.log("progress counter inside hint is",k),y(w[H].questions[k].hint,"yes")}),document.querySelector(".skip").addEventListener("click",function(){l()}),document.querySelector(".random span").innerHTML=D?"Random On":"Random Off",document.querySelector(".answer").addEventListener("click",function(){var e=document.querySelector("#answerRow textarea").value;if("All"==A){t=w[H].questions[k].answer;if(""!=e){function o(){e.toLowerCase().trim()==t.toLowerCase()?(y("Correct, the answer is <span class='correct'>"+t+"</span>","Continue"),E++):y("Sorry, the answer is <span class='wrong'>"+t+"</span>","Continue")}o()}else m(R.pleaseAnswer)}else{var t=b[k].answer;if(""!=e){function o(){e.toLowerCase().trim()==t.toLowerCase()?(y("Correct, the answer is <span class='correct'>"+t+"</span>","Continue"),E++):y("Sorry, the answer is <span class='wrong'>"+t+"</span>","Continue")}o()}else m(R.pleaseAnswer)}})}d()},e.open("GET","assets/data/questionScreen.html",!0),e.send()}function l(){k<w[H].questions.length?a():k==w[H].questions.length&&a()}function a(){if("All"==A){if(k<w[H].questions.length&&++k<=w[H].questions.length-1&&(document.querySelector(".questionHolder").innerHTML=w[H].questions[k].question,d()),k==w[H].questions.length){console.log("Progress report: game over");e="<h2>Game Over</h2>Topic: "+w[H].name+"<br>Category: "+A+"<br><strong>Score</strong>: "+E+" out of "+w[H].questions.length;O=!0,B=(new Date).getTime(),h(),y(e,"Continue")}}else if(k<b.length&&++k<=b.length-1&&(document.querySelector(".questionHolder").innerHTML=b[k].question,d()),k==b.length){console.log("Progress report: game over");var e="<h2>Game Over</h2>Topic: "+w[H].name+"<br>Category: "+A+"<br><strong>Score</strong>: "+E+" out of "+b.length;O=!0,B=(new Date).getTime(),h(),y(e,"Continue")}}function d(){"All"==A?(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(k)+1)+" / "+w[H].questions.length,J=w[H].questions.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value="")):(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(k)+1)+" / "+b.length,J=b.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value=""))}function g(){location.reload()}function m(e){var o=document.createElement("div");o.classList.add("errorBox"),o.innerText=e,document.querySelector(".container").appendChild(o),setTimeout(function(){document.querySelector(".container").removeChild(document.querySelector(".errorBox"))},5e3)}function y(e,o,t){var n="messageBox",r=document.createElement("div");r.classList.add(n),t?(r.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full multi'><button class='yes'>"+o+"</button><button class='no'>"+t+"</button></div></div>",document.querySelector(".container").appendChild(r),document.querySelector(".messageBox .yes").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+n)),g()}),document.querySelector(".messageBox .no").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+n))})):(r.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full'><button class='yes'>"+o+"</button></div></div>",document.querySelector(".container").appendChild(r),document.querySelector(".messageBox .yes").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+n)),"Continue"==o&&(O?g():l())}))}function q(e){window.localStorage.setItem("gameSession",JSON.stringify(e)),console.log("prove it exists by typing:","JSON.parse(window.localStorage.getItem('gameSession'));")}function S(e){return JSON.parse(window.localStorage.getItem(e))}function h(){console.log("Info sent to localStorage"),x.push({date:f(),score:E,outOf:J,duration:[N,B,p(Math.abs(N-B))],topic:w[H].name,category:A}),q(x)}function f(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],o=new Date,t=o.getDate(),n=o.getMonth(),r=o.getFullYear();o.getHours(),o.getMinutes(),o.getSeconds();return e[n]+" "+t+", "+r}function p(e){var o=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return o+":"+(t<10?"0":"")+t}function v(){for(var e=0,o=0;o<x.length;o++)e+=x[o].score/x[o].outOf,console.log(e,"scoreHolder current");return console.log(e/x.length,"scoreholder / gamelesson length"),e=e/x.length*100+"%",console.log(e),e}function L(){for(var e=0,o=0;o<x.length;o++)e+=x[o].duration[1]-x[o].duration[0],console.log(e,"scoreHolder current");return e/=x.length,console.log(e,"avg duration here"),p(e)}var w,M,T,H,C,x,b=[],A="All",k=0,E=0,O=null,D=null,R={selectTopic:"Please select a topic.",pleaseAnswer:"At least try and answer the question, alright?",endQuiz:"Are you sure you want to end your quiz?"};S("gameSession")?(console.log("Found existing localstorage values.",S("gameSession")),x=S("gameSession")):(console.log("No local storage, starting fresh."),x=[]);var N,B,J;S("gameSession")?(console.log("gameSession",x),document.querySelector(".stats .quizSessions span").innerHTML=x.length,document.querySelector(".stats .avgScore span").innerHTML=v(),document.querySelector(".stats .avgDuration span").innerHTML=L()):document.querySelector(".stats ul").innerHTML="<span class='dim'>No games played yet!</span>",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(w=JSON.parse(this.responseText),T=w,M=w,s())},e.open("GET","assets/data/topics.json",!0),e.send()}(),document.querySelector(".dropdownMenu").addEventListener("click",function(o){o.preventDefault(),console.log("You clicked topic menu",this.id),e(this.id)}),document.querySelector(".secondMenu").addEventListener("click",function(o){document.querySelector("#categoryMenu").classList.contains("disabled")||(o.preventDefault(),console.log("You clicked categoryMenu",this.id),e(this.id))}),document.querySelector(".start").addEventListener("click",function(){"Choose One"==document.querySelector("#topicMenu").innerText?m(R.selectTopic):i()}),document.querySelector(".randomHolder").addEventListener("click",function(){if(D)D=!1,document.querySelector(".randomStatus").innerText="Random off",document.querySelector(".randomHolder").classList.remove("active"),w=T,console.log(w[H].questions);else{console.log(w[H].questions,"untouched topicData"),D=!0,document.querySelector(".randomStatus").innerText="Random on",document.querySelector(".randomHolder").classList.add("active");var e=M[H].questions;console.log(e,"normal order"),e.sort(function(e,o){return Math.random()-.5}),console.log(e,"random order"),w=M,console.log(w[H].questions,"topicData now random")}})},!1);
//# sourceMappingURL=scripts.min.js.map
