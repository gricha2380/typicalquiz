"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){document.querySelector("#"+e+"+.dropdownList").classList.toggle("show"),document.querySelector("body").addEventListener("click",function(o){document.querySelector("#"+e+"+ .dropdownList")&&(o.target.matches("button")||document.querySelector("#"+e+"+ .dropdownList").classList.remove("show"))})}function o(e,o){document.querySelector("#topicMenu").innerText=e,document.querySelector("#topicMenu + .dropdownList").classList.toggle("show"),document.querySelector(".questionCount").innerHTML=o+" Questions",I?(i(),console.log("random is activated from setTopic")):l(),document.querySelector(".randomHolder").classList.remove("hide")}function t(){document.querySelector(".topic").innerText=b[x].name}function n(){document.querySelector(".category").innerText="Category: "+O}function r(e){document.querySelector("#topicRow .lowerBox").innerHTML=b[e].description}function s(){for(var e="",t=0;t<b.length;t++)e+="<a>"+b[t].name+"</a>";document.querySelector("#topicList").innerHTML=e;for(var n=document.querySelectorAll("#topicList.dropdownList a"),t=0;t<n.length;t++)n[t].setAttribute("order",t),n[t].onclick=function(){r(x=this.getAttribute("order"));var e=b[x].questions.length;o(this.innerHTML,e),document.querySelector(".secondMenu.disabled")&&document.querySelector(".secondMenu.disabled").classList.remove("disabled"),c()}}function c(){for(var e="<a order='0'>All</a>",o=1,t=[],n=b[x].questions,r=0;r<n.length;r++)-1==t.indexOf(n[r].category)&&""!==n[r].category&&(t.push(n[r].category),console.log(b[x].questions[r].category),e+="<a>"+b[x].questions[r].category+"</a>",o++);document.querySelector("#categoryList").innerHTML=e;for(var s=document.querySelectorAll("#categoryList.dropdownList a"),r=0;r<s.length;r++)s[r].setAttribute("order",r),s[r].onclick=function(){A=this.getAttribute("order");var e=o;u(this.innerHTML,e)}}function u(e,o){O=e,document.querySelector("#categoryMenu").innerText=e,document.querySelector("#categoryMenu + .dropdownList").classList.toggle("show"),console.log("you clicked "+e);for(var t=b[x].questions,n=0,r=0;r<t.length;r++)t[r].category==O&&n++;document.querySelector(".questionCount").innerHTML="All"==O?t.length+" Questions":n+" Questions"}function i(){document.querySelector(".randomStatus").innerText="Random on",document.querySelector(".randomHolder").classList.add("active"),a()}function l(){document.querySelector(".randomStatus").innerText="Random off",document.querySelector(".randomHolder").classList.remove("active"),a()}function a(){if(console.log("in randomToggle function"),I){console.log("random var has value");var e=C[x].questions;console.log(e,"normal order"),e.sort(function(e,o){return Math.random()-.5}),console.log(e,"random order"),b=C,console.log(b[x].questions,"topicData now random")}else console.log("topicdata backup",k),console.log("topicdata random",C),b=k,console.log(b[x].questions,"topicData random is off")}function d(){P=(new Date).getTime();var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.responseText;if(document.querySelector("body").innerHTML=e,t(),n(),"All"==O)document.querySelector(".questionHolder").innerHTML=b[x].questions[0].question;else{console.log("chosenCategory",O),console.log(b[x].questions);for(var o=0;o<b[x].questions.length;o++)console.log(b[x].questions[o].category),b[x].questions[o].category==O&&D.push(b[x].questions[o]);console.log(D,"show me what you got, topicDataFilteredCategory."),document.querySelector(".questionHolder").innerHTML=D[0].question}document.querySelector("#yourAnswer").focus(),document.querySelector(".close").addEventListener("click",function(){p(F.endQuiz,"yes","no")}),document.querySelector(".hint").addEventListener("click",function(){console.log("progress counter inside hint is",R),p(b[x].questions[R].hint,"yes")}),document.querySelector(".skip").addEventListener("click",function(){g()}),document.querySelector(".random span").innerHTML=I?"Random On":"Random Off",document.querySelector(".answer").addEventListener("click",function(){m()}),document.querySelector("#yourAnswer").addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in text field"),J||m())})}q()},e.open("GET","assets/data/questionScreen.html",!0),e.send()}function m(){var e=document.querySelector("#answerRow textarea").value;if("All"==O)o=b[x].questions[R].answer;else var o=D[R].answer;if(""!=e){e.toLowerCase().trim()==o.toLowerCase()?(p("Correct, the answer is <span class='correct'>"+o+"</span>","Continue"),N++):p("Sorry, the answer is <span class='wrong'>"+o+"</span>","Continue")}else f(F.pleaseAnswer)}function g(){R<b[x].questions.length?y():R==b[x].questions.length&&y()}function y(){if("All"==O){if(R<b[x].questions.length&&++R<=b[x].questions.length-1&&(document.querySelector(".questionHolder").innerHTML=b[x].questions[R].question,q()),R==b[x].questions.length){console.log("Progress report: game over");e="<h2>Game Over</h2>Topic: "+b[x].name+"<br>Category: "+O+"<br><strong>Score</strong>: "+N+" out of "+b[x].questions.length;J=!0,Q=(new Date).getTime(),L(),p(e,"Continue")}}else if(R<D.length&&++R<=D.length-1&&(document.querySelector(".questionHolder").innerHTML=D[R].question,q()),R==D.length){console.log("Progress report: game over");var e="<h2>Game Over</h2>Topic: "+b[x].name+"<br>Category: "+O+"<br><strong>Score</strong>: "+N+" out of "+D.length;J=!0,Q=(new Date).getTime(),L(),p(e,"Continue")}}function q(){"All"==O?(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(R)+1)+" / "+b[x].questions.length,z=b[x].questions.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value="")):(document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(R)+1)+" / "+D.length,z=D.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value=""))}function S(){location.reload()}function f(e){var o=document.createElement("div");o.classList.add("errorBox"),o.innerText=e,document.querySelector(".container").appendChild(o),setTimeout(function(){document.querySelector(".container").removeChild(document.querySelector(".errorBox"))},5e3)}function p(e,o,t){function n(){document.querySelector(".container").removeChild(document.querySelector("."+r)),"Continue"==o&&(J?S():(g(),document.querySelector("#yourAnswer").focus()))}var r="messageBox",s=document.createElement("div");s.classList.add(r),t?(s.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full multi'><button class='yes'>"+o+"</button><button class='no'>"+t+"</button></div></div>",document.querySelector(".container").appendChild(s),document.querySelector("."+r+" .yes").focus(),document.querySelector("."+r+" .yes").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+r)),S()}),document.querySelector("."+r+" .no").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+r)),document.querySelector("#yourAnswer").focus()})):(s.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full'><button class='yes'>"+o+"</button></div></div>",document.querySelector(".container").appendChild(s),document.querySelector("."+r+" .yes").focus(),document.querySelector("."+r+" .yes").addEventListener("keypress",function(e){console.log("I know you pressed something"),13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in a modal"),n())}),document.querySelector("."+r+" .yes").addEventListener("click",function(){n(),console.log("I will try to close modal")}))}function h(e){window.localStorage.setItem("gameSession",JSON.stringify(e)),console.log("prove it exists by typing:","JSON.parse(window.localStorage.getItem('gameSession'));")}function v(e){return JSON.parse(window.localStorage.getItem(e))}function L(){console.log("Info sent to localStorage"),E.push({date:w(),score:N,outOf:z,duration:[P,Q,T(Math.abs(P-Q))],topic:b[x].name,category:O}),h(E)}function w(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],o=new Date,t=o.getDate(),n=o.getMonth(),r=o.getFullYear();o.getHours(),o.getMinutes(),o.getSeconds();return e[n]+" "+t+", "+r}function T(e){var o=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return o+":"+(t<10?"0":"")+t}function M(){for(var e=0,o=0;o<E.length;o++)e+=E[o].score/E[o].outOf;return e=(e/E.length*100).toFixed(2)+"%"}function H(){for(var e=0,o=0;o<E.length;o++)e+=E[o].duration[1]-E[o].duration[0];return e/=E.length,T(e)}var b,C,k,x,A,E,D=[],O="All",R=0,N=0,J=null,I=!0,F={selectTopic:"Please select a topic.",pleaseAnswer:"At least try and answer the question, alright?",endQuiz:"Are you sure you want to end your quiz?"};v("gameSession")?E=v("gameSession"):(console.log("No localStorage, starting fresh."),E=[]);var P,Q,z;v("gameSession")?(document.querySelector(".stats .quizSessions span").innerHTML=E.length,document.querySelector(".stats .avgScore span").innerHTML=M(),document.querySelector(".stats .avgDuration span").innerHTML=H()):document.querySelector(".stats ul").innerHTML="<span class='dim'>No games played yet!</span>",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(b=JSON.parse(this.responseText),k=b,console.log("Topic data backup CLEAN",k),C=b,console.log("Topicdata contents",b),s())},e.open("GET","assets/data/topics.json",!0),e.send()}(),document.querySelector(".dropdownMenu").addEventListener("click",function(o){o.preventDefault(),console.log("You clicked topic menu",this.id),e(this.id)}),document.querySelector(".secondMenu").addEventListener("click",function(o){document.querySelector("#categoryMenu").classList.contains("disabled")||(o.preventDefault(),console.log("You clicked categoryMenu",this.id),e(this.id))}),document.querySelector(".start").addEventListener("click",function(){"Choose One"==document.querySelector("#topicMenu").innerText?f(F.selectTopic):d()}),document.querySelector(".randomHolder").addEventListener("click",function(){I?(I=!1,l()):(I=!0,i())})},!1);
//# sourceMappingURL=scripts.min.js.map
