document.addEventListener("DOMContentLoaded",function(){var i,o,t,l,a,d,m,g,n=[],y="All",r=0,q=0,S=null,s=!1,c={selectTopic:"Please select a topic.",pleaseAnswer:"At least try and answer the question, alright?",endQuiz:"Are you sure you want to end your quiz?"};D("gameSession")?a=D("gameSession"):(console.log("No localStorage, starting fresh."),a=[]);var e,p=[];function u(o){document.querySelector("#"+o+"+.dropdownList").classList.toggle("show"),document.querySelector("body").addEventListener("click",function(e){document.querySelector("#"+o+"+ .dropdownList")&&(e.target.matches("button")||document.querySelector("#"+o+"+ .dropdownList").classList.remove("show"))})}function h(e,o){document.querySelector("#topicMenu").innerText=e,document.querySelector("#topicMenu + .dropdownList").classList.toggle("show"),document.querySelector(".questionCount").innerHTML=o+" Questions",s?(w(),console.log("random is activated from setTopic")):L(),document.querySelector(".randomHolder").classList.remove("hide")}function f(){for(var e="<a order='0'>All</a>",o=1,t=[],n=i[l].questions,r=0;r<n.length;r++)-1==t.indexOf(n[r].category)&&""!==n[r].category&&(t.push(n[r].category),console.log(i[l].questions[r].category),e+="<a>"+i[l].questions[r].category+"</a>",o++);document.querySelector("#categoryList").innerHTML=e;var s=document.querySelectorAll("#categoryList.dropdownList a");for(r=0;r<s.length;r++)s[r].setAttribute("order",r),s[r].onclick=function(){this.getAttribute("order");var e=o;v(this.innerHTML,e)}}function v(e,o){y=e,document.querySelector("#categoryMenu").innerText=e,document.querySelector("#categoryMenu + .dropdownList").classList.toggle("show"),console.log("you clicked "+e);for(var t=i[l].questions,n=0,r=0;r<t.length;r++)t[r].category==y&&n++;document.querySelector(".questionCount").innerHTML="All"==y?t.length+" Questions":n+" Questions"}function w(){document.querySelector(".randomStatus").innerText="Random on",document.querySelector(".randomHolder").classList.add("active"),T()}function L(){document.querySelector(".randomStatus").innerText="Random off",document.querySelector(".randomHolder").classList.remove("active"),T()}function T(){if(console.log("in randomToggle function"),s){console.log("random var has value");var e=o[l].questions;console.log(e,"normal order"),e.sort(function(e,o){return Math.random()-.5}),console.log(e,"random order"),i=o,console.log(i[l].questions,"topicData now random")}else console.log("topicdata backup",t),console.log("topicdata random",o),i=t,console.log(i[l].questions,"topicData random is off")}function M(){var e,o=document.querySelector("#answerRow textarea").value;if("All"==y){var t=i[l].questions[r].answer;e=i[l].questions[r].question}else{t=n[r].answer;e=n[r].question}if(""!=o){o.toLowerCase().trim()==t.toLowerCase()?(x("Correct, the answer is <span class='correct'>"+t+"</span>","Continue"),q++):(p.push({question:e,answer:t,userAnswer:o}),x("Sorry, the answer is <span class='wrong'>"+t+"</span>","Continue"))}else E(c.pleaseAnswer)}function H(){r<i[l].questions.length?b():r==i[l].questions.length&&b()}function b(){"All"==y?(r<i[l].questions.length&&++r<=i[l].questions.length-1&&(document.querySelector(".questionHolder").innerHTML=i[l].questions[r].question,k()),r==i[l].questions.length&&A()):(r<n.length&&++r<=n.length-1&&(document.querySelector(".questionHolder").innerHTML=n[r].question,k()),r==n.length&&A())}function A(){console.log("Progress report: game over");var e="<h2>Game Over</h2>Topic: "+i[l].name+"<br>Category: "+y+"<br><strong>Score</strong>: "+q+" out of "+i[l].questions.length;console.log(p);for(var o,t,n,r,s,c="<div id='answerToggle'>Show Wrong Answers</div><ul id='resultsList'>",u=0;u<p.length;u++)c+="<li><span>Question: </span>"+p[u].question+"</li>",c+="<li><span>Your Answer: </span>"+p[u].userAnswer+"</li>",c+="<li class='groupEnd'><span>Correct Answer: </span>"+p[u].answer+"</li>";c+="</ul>",S=!0,m=(new Date).getTime(),console.log("Info sent to localStorage"),a.push({date:(o=new Date,t=o.getDate(),n=o.getMonth(),r=o.getFullYear(),o.getHours(),o.getMinutes(),o.getSeconds(),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][n]+" "+t+", "+r),score:q,outOf:g,duration:[d,m,O(Math.abs(d-m))],topic:i[l].name,category:y}),s=a,window.localStorage.setItem("gameSession",JSON.stringify(s)),console.log("prove it exists by typing:","JSON.parse(window.localStorage.getItem('gameSession'));"),x(e+c,"Continue"),document.querySelector(".messageBox .yes").focus(),document.querySelector("#answerToggle").addEventListener("click",function(){document.querySelector("#resultsList").classList.toggle("show"),document.querySelector("#resultsList").classList.contains("show")?document.querySelector("#answerToggle").innerHTML="Hide Wrong Answers":document.querySelector("#answerToggle").innerHTML="Show Wrong Answers"})}function k(){"All"==y?document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(r)+1)+" / "+i[l].questions.length,g=i[l].questions.length):document.querySelector(".progress")&&(document.querySelector(".progress").innerHTML="Progress: "+(Number(r)+1)+" / "+n.length,g=n.length),document.querySelector("#answerRow textarea")&&(document.querySelector("#answerRow textarea").value="")}function C(){location.reload()}function E(e){var o="errorBox",t=document.createElement("div");t.classList.add(o),t.innerText=e,document.querySelector(".container").appendChild(t),setTimeout(function(){document.querySelector(".container").removeChild(document.querySelector("."+o))},5e3)}function x(e,o,t){var n="messageBox",r=document.createElement("div");function s(){document.querySelector(".container").removeChild(document.querySelector("."+n)),"Continue"==o&&(S?C():(H(),document.querySelector("#yourAnswer").focus()))}r.classList.add(n),t?(r.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full multi'><button class='yes'>"+o+"</button><button class='no'>"+t+"</button></div></div>",document.querySelector(".container").appendChild(r),document.querySelector("."+n+" .yes").focus(),document.querySelector("."+n+" .yes").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+n)),C()}),document.querySelector("."+n+" .no").addEventListener("click",function(){document.querySelector(".container").removeChild(document.querySelector("."+n)),document.querySelector("#yourAnswer").focus()})):(r.innerHTML="<div class='inner'><div class='row pad'>"+e+"</div> <div class='row full'><button class='yes'>"+o+"</button></div></div>",document.querySelector(".container").appendChild(r),document.querySelector("."+n+" .yes").focus(),document.querySelector("."+n+" .yes").addEventListener("keypress",function(e){console.log("I know you pressed something"),13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in a modal"),s())}),document.querySelector("."+n+" .yes").addEventListener("click",function(){s(),console.log("I will try to close modal")}))}function D(e){return JSON.parse(window.localStorage.getItem(e))}function O(e){var o=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return o+":"+(t<10?"0":"")+t}D("gameSession")?(document.querySelector(".stats .quizSessions span").innerHTML=a.length,document.querySelector(".stats .avgScore span").innerHTML=function(){for(var e=0,o=0;o<a.length;o++)e+=a[o].score/a[o].outOf;return e=(e/a.length*100).toFixed(2)+"%"}(),document.querySelector(".stats .avgDuration span").innerHTML=function(){for(var e=0,o=0;o<a.length;o++)e+=a[o].duration[1]-a[o].duration[0];return O(e/=a.length)}()):document.querySelector(".stats ul").innerHTML="<span class='dim'>No games played yet!</span>",(e=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(i=JSON.parse(this.responseText),t=i,console.log("Topic data backup CLEAN",t),o=i,console.log("Topicdata contents",i),function(){for(var e="",o=0;o<i.length;o++)e+="<a>"+i[o].name+"</a>";document.querySelector("#topicList").innerHTML=e;for(var t=document.querySelectorAll("#topicList.dropdownList a"),o=0;o<t.length;o++)t[o].setAttribute("order",o),t[o].onclick=function(){var e;l=this.getAttribute("order"),e=l,document.querySelector("#topicRow .lowerBox").innerHTML=i[e].description;var o=i[l].questions.length;h(this.innerHTML,o),document.querySelector(".secondMenu.disabled")&&document.querySelector(".secondMenu.disabled").classList.remove("disabled"),f()}}())},e.open("GET","assets/data/topics.json",!0),e.send(),document.querySelector(".dropdownMenu").addEventListener("click",function(e){e.preventDefault(),console.log("You clicked topic menu",this.id),u(this.id)}),document.querySelector(".secondMenu").addEventListener("click",function(e){document.querySelector("#categoryMenu").classList.contains("disabled")||(e.preventDefault(),console.log("You clicked categoryMenu",this.id),u(this.id))}),document.querySelector(".start").addEventListener("click",function(){"Choose One"==document.querySelector("#topicMenu").innerText?E(c.selectTopic):function(){d=(new Date).getTime();var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.responseText;if(document.querySelector("body").innerHTML=e,document.querySelector(".topic").innerText=i[l].name,document.querySelector(".category").innerText="Category: "+y,"All"==y)document.querySelector(".questionHolder").innerHTML=i[l].questions[0].question;else{console.log("chosenCategory",y),console.log(i[l].questions);for(var o=0;o<i[l].questions.length;o++)console.log(i[l].questions[o].category),i[l].questions[o].category==y&&n.push(i[l].questions[o]);console.log(n,"show me what you got, topicDataFilteredCategory."),document.querySelector(".questionHolder").innerHTML=n[0].question}document.querySelector("#yourAnswer").focus(),document.querySelector(".close").addEventListener("click",function(){x(c.endQuiz,"yes","no")}),document.querySelector(".hint").addEventListener("click",function(){console.log("progress counter inside hint is",r),x(i[l].questions[r].hint,"yes")}),document.querySelector(".skip").addEventListener("click",function(){H()}),document.querySelector(".random span").innerHTML=s?"Random On":"Random Off",document.querySelector(".answer").addEventListener("click",function(){M()}),document.querySelector("#yourAnswer").addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),console.log("you pressed enter in text field"),S||M())})}k()},e.open("GET","assets/data/questionScreen.html",!0),e.send()}()}),document.querySelector(".randomHolder").addEventListener("click",function(){s?(s=!1,L()):(s=!0,w())}),document.querySelector(".info")&&document.querySelector(".info").addEventListener("click",function(){x("<h3>What is this?</h3><div class='left-align small''><p>Typical Quiz is a study tool to help my stubborn brain remember stuff. Built from scratch in vanilla Javascript, it was also good code practice.</p><p>Source Code: <a href='https://github.com/gricha2380/typicalquiz' class='match'>https://github.com/gricha2380/typicalquiz</a></p></div>","Okay")})},!1);
//# sourceMappingURL=scripts.min.js.map
